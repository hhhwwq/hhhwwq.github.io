---
title: location对象;浏览器从输入URL到页面渲染的整个流程;跨域;回流,重绘;arguments(补充)
date: 2019-10-25 10:36:05
tags: "JavaScript"

---

EventLoop事件循环
=========================


27.EventLoop事件循环
---------------------

![](https://raw.githubusercontent.com/hhhwwq/MarkdownPhotos/master/eventlop_1.png)

-   同步和异步任务**分别进入不同的执行”场所”**，同步的进入主线程，异步的进入Event
    Table并注册函数。
-   当指定的事情完成时，Event Table会将这个函数移入Event Queue。
-   主线程内的任务执行完毕为空，会去Event
    Queue读取对应的函数，进入主线程执行。
-   上述过程会不断重复，也就是常说的Event Loop(事件循环)。

setTimeout这个函数，是经过指定时间后，**把要执行的任务加入到Event
Queue中**，又因为是单线程任务要一个一个执行，如果前面的任务需要的时间太久，那么只能等着，导致真正的延迟时间远远大于设置的时间长度。

​ setInterval会每隔**指定的时间将注册的函数置入Event
Queue**，如果前面的任务耗时太久，那么同样需要等待。唯一需要注意的一点是，对于setInterval(fn,ms)来说，我们已经知道不是每过ms秒会执行一次fn，而是每过ms秒，会有fn进入Event
Queue。一旦**setInterval的回调函数fn执行时间超过了延迟时间ms，那么就完全看不出来有时间间隔了。**

除了广义的同步任务和异步任务，我们对任务有更精细的定义：

-   macro-task(宏任务)：包括整体代码script，setTimeout，setInterval
-   micro-task(微任务)：Promise，process.nextTick
    不同类型的任务会进入对应的Event
    Queue，比如setTimeout和setInterval会进入相同的Event Queue。

![](https://raw.githubusercontent.com/hhhwwq/MarkdownPhotos/master/eventlop_2.png)

进入整体代码(宏任务)后，开始第一次循环。接着执行所有的微任务。然后再次从宏任务开始，找到其中一个任务队列执行完毕，再执行所有的微任务。

