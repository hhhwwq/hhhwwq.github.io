---
title: 第八，九章 BOM，客户端检测
date: 2019-12-23 22:50:05
tags: "JavaScript"
tags: "JavaScript高级程序设计"
---

# 第八，九章 BOM，客户端检测

## 第八章

浏览器对象模型(BOM)以`window`对象为依托，表示浏览器窗口以及页面可见区域。同时，window对象还是ECMAScript中的Global对象，因而所有全局变量和函数都是它的属性，且所有原生的构造函数以及其他函数也都存在于它的命名空间下。

## 本章讨论了下列BOM的组成部分：

1. 
在使用框架时，每个框架都有自己的`window`对象以及所有原生构造函数及其他函数的副本。每个框架都保存在`frames`集合中，可以通过位置或通过名称来访问。

2. 
有一些窗口指针，可以用来引用其他框架，包括父框架。

3. 
`top`对象始终指向最外围的框架，也就是整个浏览器窗口。

4. 
`parent`对象表示包含当前框架的框架，而self对象则值回`window`。

5. 
使用`location`对象可以通过编程方式来访问浏览器的导航系统。设置相应的属性，可以逐段或整体地修改浏览器的URL。

6. 
调用`replace()`方法可以导航到一个新URL，同时该URL会替换浏览器历史记录中当前显示的页面。

7. 
`navigator`对象提供了与浏览器有关的信息。到底提供哪些信息，很大程度上取决于用户的浏览器；不过也有一些公共的属性（如userAgent）存在于所有浏览器中。

`BOM`中还有两个对象：screen和history，但它们的功能有限。screen对象中保存着与客户端显示器相关的信息，这些信息一般用于站点分析。`history`对象为访问浏览器的历史记录开了一个小缝隙，开发人员可以据此判断历史记录数量，也可以在历史记录中向后或向前导航到任意页面。

## 第九章

客户端检测是JavaScript开发中最具争议的一个话题。由于浏览器间存在差别，通常需要根据不同浏览器的能力分别编写不同的代码。

## 下列的客户端检测方法是最常用的：

1. 能力检测：在编写代码之前先检测特定浏览器的能力。将开发人员从考虑具体的浏览器类型和版本中释放出来，将注意力集中到相应的能力是否存在上。缺点是无法精确的检测特定浏览器和版本。
2. 怪癖检测： 实际上是浏览器中存在的bug。通常涉及到一小段代码，然后确定浏览器是否存在某个怪癖。效率相比能力检测较低。
3. 用户代理检测：通过检测用户代理字符串来识别浏览器。需要特殊的技巧。通过用户代理字符串能够检测出浏览器所用的呈现引擎以及所在的平台。

在决定使用哪一种方法时，优先考虑能力检测，怪癖检测是确定应该如何处理代码的第二选择，最后是对用户字符串有很强依赖性的用户代理检测。

